(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{437:function(e,t,a){"use strict";(function(e,t){var n=a(4);a(26);n(a(25));var r=n(a(438));e.__webpack_require_UNI_MP_PLUGIN__=a,t(r.default)}).call(this,a(1)["default"],a(2)["createPage"])},438:function(e,t,a){"use strict";a.r(t);var n=a(439),r=a(441);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a(443);var s,i=a(34),c=Object(i["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],s);c.options.__file="pages/product/list.vue",t["default"]=c.exports},439:function(e,t,a){"use strict";a.r(t);var n=a(440);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},440:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return r})),a.d(t,"staticRenderFns",(function(){return s})),a.d(t,"recyclableRender",(function(){return o})),a.d(t,"components",(function(){return n}));try{n={wmWatermark:function(){return a.e("components/wm-watermark/wm-watermark").then(a.bind(null,798))},uniLoadMore:function(){return a.e("components/uni-load-more/uni-load-more").then(a.bind(null,826))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,a=(e._self._c,e.goodsList.length);e.$mp.data=Object.assign({},{$root:{g0:a}})},o=!1,s=[];r._withStripped=!0},441:function(e,t,a){"use strict";a.r(t);var n=a(442),r=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},442:function(e,t,a){"use strict";(function(e){var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61)),o=n(a(63)),s=function(){a.e("components/uni-load-more/uni-load-more").then(function(){return resolve(a(826))}.bind(null,a)).catch(a.oe)},i=function(){a.e("components/empty").then(function(){return resolve(a(833))}.bind(null,a)).catch(a.oe)},c={components:{uniLoadMore:s,empty:i},data:function(){return{classId:"",kw:"",specialClassId:"",brandCode:"",parentClassId:"",pageSize:10,popularityOrder:"",priceOrder:"",saleOrder:"",searchModel:101,page:0,totalPage:0,cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,cateList:[],goodsList:[]}},onLoad:function(e){this.classId=e.classId?e.classId:"",this.specialClassId=e.specialClassId?e.specialClassId:"",this.brandCode=e.brandCode?e.brandCode:"",this.parentClassId=e.parentClassId?e.parentClassId:"",this.page=1,this.loadData()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.page=1,this.loadData("refresh")},onReachBottom:function(){this.loadData()},methods:{loadCateList:function(e,t){var a=this;return(0,o.default)(r.default.mark((function t(){var n,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$api.json("cateList");case 2:n=t.sent,o=n.filter((function(t){return t.pid==e})),o.forEach((function(e){var t=n.filter((function(t){return t.pid==e.id}));e.child=t})),a.cateList=o;case 6:case"end":return t.stop()}}),t)})))()},loadData:function(){var t=arguments,a=this;return(0,o.default)(r.default.mark((function n(){var o,s,i,c,d;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:"add",s=t.length>1?t[1]:void 0,"add"!==o){n.next=8;break}if("nomore"!==a.loadingType){n.next=5;break}return n.abrupt("return");case 5:a.loadingType="loading",n.next=9;break;case 8:a.loadingType="more";case 9:return i={classId:a.classId,specialClassId:a.specialClassId,parentClassId:a.parentClassId,brandCode:a.brandCode,kw:a.kw,pageNo:a.page,pageSize:a.pageSize,popularityOrder:a.popularityOrder,priceOrder:a.priceOrder,saleOrder:a.saleOrder,searchModel:a.searchModel},n.next=12,a.$axios(a.$baseUrl.searchProduct,i);case 12:c=n.sent,1==a.page&&(a.totalPage=c.data.data.pages),d=c.data.data.data,console.log("商品列表：",d),"refresh"===o&&(a.goodsList=[]),a.goodsList=a.goodsList.concat(d),a.page>=a.totalPage?(e.stopPullDownRefresh(),a.page=a.totalPage+1,a.loadingType="noMore"):(a.page=a.page+1,console.log(a.page),a.loadData(),a.loadingType="more"),"refresh"===o&&(1==s?e.hideLoading():e.stopPullDownRefresh());case 20:case"end":return n.stop()}}),n)})))()},tabClick:function(t){this.page=1,this.filterIndex=t,this.popularityOrder=1===t?"asc"===this.popularityOrder?"desc":"asc":"",this.saleOrder=2===t?"asc"===this.saleOrder?"desc":"asc":"",this.priceOrder=3===t?"asc"===this.priceOrder?"desc":"asc":"",e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},toggleCateMask:function(e){var t=this,a="show"===e?10:300,n="show"===e?1:0;this.cateMaskState=2,setTimeout((function(){t.cateMaskState=n}),a)},changeCate:function(t){this.cateId=t.id,this.toggleCateMask(),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},navToDetailPage:function(t){var a=t.code;e.navigateTo({url:"/pages/product/product?code=".concat(a)})},stopPrevent:function(){}}};t.default=c}).call(this,a(2)["default"])},443:function(e,t,a){"use strict";a.r(t);var n=a(444),r=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},444:function(e,t,a){}},[[437,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/product/list.js.map