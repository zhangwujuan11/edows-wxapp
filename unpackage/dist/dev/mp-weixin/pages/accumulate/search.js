(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/accumulate/search"],{493:function(e,t,n){"use strict";(function(e,t){var a=n(4);n(26);a(n(25));var r=a(n(494));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},494:function(e,t,n){"use strict";n.r(t);var a=n(495),r=n(497);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n(499);var i,s=n(34),c=Object(s["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],i);c.options.__file="pages/accumulate/search.vue",t["default"]=c.exports},495:function(e,t,n){"use strict";n.r(t);var a=n(496);n.d(t,"render",(function(){return a["render"]})),n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(t,"components",(function(){return a["components"]}))},496:function(e,t,n){"use strict";var a;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return a}));try{a={uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,826))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.goodsList.length);e.$mp.data=Object.assign({},{$root:{g0:n}})},o=!1,i=[];r._withStripped=!0},497:function(e,t,n){"use strict";n.r(t);var a=n(498),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},498:function(e,t,n){"use strict";(function(e){var a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(61)),o=a(n(63)),i=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n(826))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/empty").then(function(){return resolve(n(833))}.bind(null,n)).catch(n.oe)},c={components:{uniLoadMore:i,empty:s},data:function(){return{classId:"",kw:"",pageSize:10,popularityOrder:"",priceOrder:"",saleOrder:"",searchModel:101,page:0,totalPage:0,cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,cateList:[],goodsList:[]}},onLoad:function(e){console.log(e,"options"),this.kw=e.kw?e.kw:"",this.classId=e.classId?e.classId:"",this.page=1,this.loadData()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.page=1,this.loadData("refresh")},onReachBottom:function(){this.loadData()},methods:{toKeySearch:function(){e.redirectTo({url:"/pages/accumulate/keySearch"})},loadCateList:function(e,t){var n=this;return(0,o.default)(r.default.mark((function t(){var a,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$api.json("cateList");case 2:a=t.sent,o=a.filter((function(t){return t.pid==e})),o.forEach((function(e){var t=a.filter((function(t){return t.pid==e.id}));e.child=t})),n.cateList=o;case 6:case"end":return t.stop()}}),t)})))()},loadData:function(){var t=arguments,n=this;return(0,o.default)(r.default.mark((function a(){var o,i,s,c,d;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:"add",i=t.length>1?t[1]:void 0,"add"!==o){a.next=8;break}if("nomore"!==n.loadingType){a.next=5;break}return a.abrupt("return");case 5:n.loadingType="loading",a.next=9;break;case 8:n.loadingType="more";case 9:return s={classId:n.classId,kw:n.kw,pageNo:n.page,pageSize:n.pageSize,popularityOrder:n.popularityOrder,priceOrder:n.priceOrder,saleOrder:n.saleOrder,searchModel:n.searchModel},a.next=12,n.$axios(n.$baseUrl.scoreGoodsSearch,s);case 12:c=a.sent,1==n.page&&(n.totalPage=c.data.data.pages),d=c.data.data.data,console.log("商品列表：",d),"refresh"===o&&(n.goodsList=[]),1===n.filterIndex&&d.sort((function(e,t){return t.sales-e.sales})),2===n.filterIndex&&d.sort((function(e,t){return 1==n.priceOrder?e.price-t.price:t.price-e.price})),n.goodsList=n.goodsList.concat(d),n.page>=n.totalPage?(e.stopPullDownRefresh(),n.page=n.totalPage+1,n.loadingType="noMore"):(n.page=n.page+1,console.log(n.page),n.loadData(),n.loadingType="more"),"refresh"===o&&(1==i?e.hideLoading():e.stopPullDownRefresh());case 22:case"end":return a.stop()}}),a)})))()},tabClick:function(t){this.page=1,this.filterIndex=t,this.popularityOrder=1===t?"asc"===this.popularityOrder?"desc":"asc":"",this.saleOrder=2===t?"asc"===this.saleOrder?"desc":"asc":"",this.priceOrder=3===t?"asc"===this.priceOrder?"desc":"asc":"",e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},toggleCateMask:function(e){var t=this,n="show"===e?10:300,a="show"===e?1:0;this.cateMaskState=2,setTimeout((function(){t.cateMaskState=a}),n)},changeCate:function(t){this.cateId=t.id,this.toggleCateMask(),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},navToDetailPage:function(t){var n=t.code;e.navigateTo({url:"/pages/accumulate/product?code=".concat(n)})},stopPrevent:function(){}}};t.default=c}).call(this,n(2)["default"])},499:function(e,t,n){"use strict";n.r(t);var a=n(500),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},500:function(e,t,n){}},[[493,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/accumulate/search.js.map