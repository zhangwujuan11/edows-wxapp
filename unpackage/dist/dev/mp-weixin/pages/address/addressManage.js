(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{381:function(e,t,a){"use strict";(function(e,t){var n=a(4);a(26);n(a(25));var r=n(a(382));e.__webpack_require_UNI_MP_PLUGIN__=a,t(r.default)}).call(this,a(1)["default"],a(2)["createPage"])},382:function(e,t,a){"use strict";a.r(t);var n=a(383),r=a(385);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a(387);var o,c=a(34),i=Object(c["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);i.options.__file="pages/address/addressManage.vue",t["default"]=i.exports},383:function(e,t,a){"use strict";a.r(t);var n=a(384);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},384:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return r})),a.d(t,"staticRenderFns",(function(){return o})),a.d(t,"recyclableRender",(function(){return s})),a.d(t,"components",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},s=!1,o=[];r._withStripped=!0},385:function(e,t,a){"use strict";a.r(t);var n=a(386),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},386:function(e,t,a){"use strict";(function(e,n){var r=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(61)),o=r(a(63)),c=r(a(11)),i=(a(179),a(28));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=function(){Promise.all([a.e("common/vendor"),a.e("components/pickerAddress")]).then(function(){return resolve(a(847))}.bind(null,a)).catch(a.oe)},f={data:function(){return{txt:"选择地址",title:"Hello",imgPath:"",orderData:"",subFlag:!0,specClass:"none",isShowDel:!1,contactsId:"",source:0,addressData:{id:"",name:"",mobile:"",addressName:"在地图上选择",address:"在地图上选择",roomNum:"",isDefult:0}}},components:{pickerAddress:l},computed:d({},(0,i.mapState)(["hasLogin","userInfo"])),onLoad:function(t){var a=this;return(0,o.default)(s.default.mark((function n(){var r,o;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=getCurrentPages()[0].route,console.log("当前路由：",r),a.hasLogin||e.reLaunch({url:"/pages/wxAuth/wxAuth?returnUrl="+r}),a.orderData=t.orderData,a.source=t.source,o="新增收货地址","edit"===t.type&&(o="编辑收货地址",a.addressData=JSON.parse(t.data),a.contactsId=a.addressData.id,a.isShowDel=!0,a.txt=JSON.parse(t.data).address),a.manageType=t.type,e.setNavigationBarTitle({title:o});case 9:case"end":return n.stop()}}),n)})))()},methods:{change:function(e){this.txt=e.data.join(""),this.addressData.addressName=e.data.join(""),this.addressData.address=e.data.join("")},upload:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){e.tempFilePaths;n.getFileSystemManager().readFile({filePath:e.tempFilePaths[0],encoding:"base64",success:function(e){t.imgPath="data:image/png;base64,"+e.data}})},error:function(e){console.log(e)}})},switchChange:function(e){e.detail.value?this.addressData.isDefult=1:this.addressData.isDefult=0,console.log(this.addressData.isDefult)},chooseLocation:function(){var t=this;e.chooseLocation({success:function(e){t.addressData.addressName=e.name,t.addressData.address=e.name}})},surDel:function(){var t=this;return(0,o.default)(s.default.mark((function a(){var n,r;return s.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={contactsId:t.contactsId},a.next=3,t.$axios(t.$baseUrl.delContacts,n);case 3:r=a.sent,200==r.data.code&&(t.$api.msg("地址删除成功"),setTimeout((function(){e.navigateTo({url:"/pages/address/address?orderData=".concat(t.orderData)})}),800));case 5:case"end":return a.stop()}}),a)})))()},confirm:function(){var t=this;return(0,o.default)(s.default.mark((function a(){var n,r,o;return s.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.addressData,n.name){a.next=4;break}return t.$api.msg("请填写收货人姓名"),a.abrupt("return");case 4:if(/(^1[3|4|5|7|8][0-9]{9}$)/.test(n.mobile)){a.next=7;break}return t.$api.msg("请输入正确的手机号码"),a.abrupt("return");case 7:if(n.address&&"在地图上选择"!=n.address){a.next=10;break}return t.$api.msg("请在地图选择所在位置"),a.abrupt("return");case 10:if(n.roomNum){a.next=13;break}return t.$api.msg("请填写门牌号信息"),a.abrupt("return");case 13:if(r=t.addressData,!t.subFlag){a.next=20;break}return t.subFlag=!1,a.next=18,t.$axios(t.$baseUrl.upDataContacts,r);case 18:o=a.sent,200==o.data.code&&(t.subFlag=!0,t.$api.msg("地址".concat("edit"==t.manageType?"修改":"添加","成功")),setTimeout((function(){1==t.source?(t.$api.preToPage().addressData=o.data.data,e.navigateBack({delta:2})):e.navigateTo({url:"/pages/address/address?orderData=".concat(t.orderData)})}),800));case 20:case"end":return a.stop()}}),a)})))()},toggleSpec:function(){var e=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){e.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},stopPrevent:function(){}}};t.default=f}).call(this,a(2)["default"],a(1)["default"])},387:function(e,t,a){"use strict";a.r(t);var n=a(388),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},388:function(e,t,a){}},[[381,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/address/addressManage.js.map