(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"06b9":function(t,e,s){},"2b03":function(t,e,s){"use strict";s.r(e);var i=s("cde3"),r=s("9a25");for(var a in r)"default"!==a&&function(t){s.d(e,t,function(){return r[t]})}(a);s("ec27");var o=s("2877"),n=Object(o["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=n.exports},"6b8d":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(s("a34a")),r=s("2f62"),a=s("277a");function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e,s,i,r,a,o){try{var n=t[a](o),u=n.value}catch(c){return void s(c)}n.done?e(u):Promise.resolve(u).then(i,r)}function u(t){return function(){var e=this,s=arguments;return new Promise(function(i,r){var a=t.apply(e,s);function o(t){n(a,i,r,o,u,"next",t)}function u(t){n(a,i,r,o,u,"throw",t)}o(void 0)})}}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),i.forEach(function(e){d(t,e,s[e])})}return t}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l=function(){return s.e("components/share").then(s.bind(null,"cdb4"))},h=function(){return s.e("components/swiperDot").then(s.bind(null,"3983"))},p=function(){return s.e("components/uni-number-box").then(s.bind(null,"037c"))},f={components:{share:l,swiperDot:h,uniNumberBox:p},data:function(){return{max:99999,optionType:"",productNum:1,productCode:"",isFixed:!1,productInfo:{},oldProductInfo:{},specClass:"none",seviceClass:"none",specSelected:[],defualtAttrList:[],current:0,favorite:!0,shareList:[],imgList:[],serviceList:[],desc:"",attrList:[],productComments:[],productNavs:["商品详情","商品评价"],currentIndex:0,userStar:[1,2,3,4,5]}},computed:c({},(0,r.mapState)(["hasLogin","userInfo"])),onLoad:function(){var t=u(i.default.mark(function t(e){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.productCode=e.code,console.log(this.productCode," at pages\\product\\product.vue:251"),this.getData(),this.getProductComments();case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onShareAppMessage:function(t){return{title:this.productInfo.name,path:"/pages/product/product?code="+this.productCode}},methods:{getData:function(){var t=u(i.default.mark(function t(){var e,s,r,a;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={attrValueDtos:this.defualtAttrList,productCode:this.productCode},t.next=3,this.$axios(this.$baseUrl.getProductByCode,e);case 3:for(r in s=t.sent,this.productInfo=s.data.data,this.desc=s.data.data.detail,this.imgList=s.data.data.subImgList,this.serviceList=s.data.data.serviceList,this.attrList=s.data.data.attrList,this.defualtAttrList=s.data.data.defualtAttrList,this.attrList)if(this.attrList[r].code==this.defualtAttrList[r].attrCode)for(a in this.attrList[r].valueList)this.attrList[r].valueList[a].name==this.defualtAttrList[r].attrValue&&this.$set(this.attrList[r].valueList[a],"selected",!0);case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getProductComments:function(){var t=u(i.default.mark(function t(){var e,s,r;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={pageNo:1,pageSize:999,productCode:this.productCode},t.next=3,this.$axios(this.$baseUrl.getProductComments,e);case 3:for(r in s=t.sent,this.productComments=s.data.data,this.productComments)this.productComments[r].createDate=a.fn.formatTime(this.productComments[r].createDate,"Y-M-D");case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cngProNav:function(t){this.currentIndex=t},swiperChange:function(t){this.current=t.detail.current},toCart:function(){t.switchTab({url:"/pages/cart/cart",success:function(t){var e=getCurrentPages().pop();void 0!=e&&null!=e&&e.onLoad()}})},numberChange:function(t){this.productNum=t.number,this.productNum>this.max&&(this.productNum=this.max),console.log("数量：",this.productNum," at pages\\product\\product.vue:343")},toggleService:function(){var t=this;"show"===this.seviceClass?(this.seviceClass="hide",setTimeout(function(){t.seviceClass="none"},250)):"none"===this.seviceClass&&(this.seviceClass="show")},toggleSpec:function(t){var e=this;if(this.optionType=t,"show"===this.specClass){this.specClass="hide";var s=0,i=this.defualtAttrList.length;for(var r in this.defualtAttrList)" "!=this.defualtAttrList[r].attrValue&&(s+=1);if(console.log(s,":",i," at pages\\product\\product.vue:369"),s!=i){for(var r in this.productInfo=this.oldProductInfo,this.imgList=this.oldProductInfo.subImgList,this.serviceList=this.oldProductInfo.serviceList,this.defualtAttrList=this.oldProductInfo.defualtAttrList,this.attrList=this.oldProductInfo.attrList,this.attrList)if(this.attrList[r].code==this.defualtAttrList[r].attrCode)for(var a in this.attrList[r].valueList)this.attrList[r].valueList[a].name==this.defualtAttrList[r].attrValue&&this.$set(this.attrList[r].valueList[a],"selected",!0);this.getData()}setTimeout(function(){e.specClass="none"},250)}else"none"===this.specClass&&(this.specClass="show")},toggleSpecSur:function(){var e=u(i.default.mark(function e(){var s,r,a,o,n,u=this;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<this.defualtAttrList.length)){e.next=8;break}if(" "!=this.defualtAttrList[s].attrValue){e.next=5;break}return this.$api.msg("请选择"+this.attrList[s].name),e.abrupt("return",!1);case 5:s++,e.next=1;break;case 8:if("cart"!=this.optionType){e.next=14;break}return r={attrValues:this.defualtAttrList,num:this.productNum,productCode:this.productCode},e.next=12,this.$axios(this.$baseUrl.addShoppingCart,JSON.stringify(r));case 12:a=e.sent,200==a.data.code&&this.$api.msg("加入购物车成功！");case 14:"buy"==this.optionType&&(o=[],n={productName:this.productInfo.name,price:this.productInfo.price,productCode:this.productInfo.productCode,imgPath:this.productInfo.masterImg,attrValueVOList:this.productInfo.defualtAttrList},o.push({productList:n,productNum:this.productNum}),console.log(o," at pages\\product\\product.vue:437"),t.setStorage({key:"tmpOrderData",data:o}),t.navigateTo({url:"/pages/order/createOrder"})),this.specClass="hide",setTimeout(function(){u.specClass="none"},250);case 17:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),selectSpec:function(t,e,s){var i=this;console.log(t,e," at pages\\product\\product.vue:457");var r=this.attrList,a=0,o=this.productInfo.defualtAttrList.length;for(var n in this.productInfo.defualtAttrList)" "!=this.productInfo.defualtAttrList[n].attrValue&&(a+=1);console.log(a,":",o," at pages\\product\\product.vue:466"),a==o&&(this.oldProductInfo=this.productInfo);var u=r[t].valueList[e].selected||!1;if(r[t].valueList[e].isShow){for(var n in r[t].valueList)r[t].valueList[n].pCode==s&&this.$set(r[t].valueList[n],"selected",!1);console.log(u," at pages\\product\\product.vue:481"),u?this.$set(r[t].valueList[e],"selected",!1):this.$set(r[t].valueList[e],"selected",!0),this.defualtAttrList=[],r.forEach(function(t){for(var e in t.valueList){var s={};!0===t.valueList[e].selected&&(s.attrCode=t.valueList[e].pCode,s.attrValue=t.valueList[e].name,i.defualtAttrList.push(s))}}),console.log(this.defualtAttrList," at pages\\product\\product.vue:511"),this.getData()}},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.favorite=!this.favorite},buy:function(){t.navigateTo({url:"/pages/order/createOrder"})},stopPrevent:function(){}},filters:{formatRichText:function(t){var e=t.replace(/<img[^>]*>/gi,function(t,e){return t=t.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,""),t=t.replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,""),t=t.replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,""),t});return e=e.replace(/style="[^"]+"/gi,function(t,e){return t=t.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;"),t}),e=e.replace(/<br[^>]*\/>/gi,""),e=e.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:inline-block;margin:10rpx auto;"'),e}},onPageScroll:function(t){t.scrollTop>460?this.isFixed=!0:this.isFixed=!1}};e.default=f}).call(this,s("6e42")["default"])},"9a25":function(t,e,s){"use strict";s.r(e);var i=s("6b8d"),r=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);e["default"]=r.a},cde3:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=(t._self._c,t._f("formatRichText")(t.desc));t.$mp.data=Object.assign({},{$root:{f0:s}})},r=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return r})},ec27:function(t,e,s){"use strict";var i=s("06b9"),r=s.n(i);r.a}},[["847f","common/runtime","common/vendor"]]]);