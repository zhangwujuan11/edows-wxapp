(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"4e33":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(a("a34a")),n=a("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,a,r,n,o,s){try{var i=t[o](s),u=i.value}catch(c){return void a(c)}i.done?e(u):Promise.resolve(u).then(r,n)}function i(t){return function(){var e=this,a=arguments;return new Promise(function(r,n){var o=t.apply(e,a);function i(t){s(o,r,n,i,u,"next",t)}function u(t){s(o,r,n,i,u,"throw",t)}i(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(e){c(t,e,a[e])})}return t}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={data:function(){return{orderData:"",subFlag:!0,total:0,goodsList:[],maskState:0,desc:"",payType:1,couponList:[{title:"新用户专享优惠券",price:5},{title:"庆五一发一波优惠券",price:10},{title:"优惠券优惠券优惠券优惠券",price:15}],addressData:{code:""},facdureData:{code:"",payable:"不开发票"}}},computed:u({},(0,n.mapState)(["hasLogin","userInfo"])),onLoad:function(e){var a=getCurrentPages()[0].route;console.log("当前路由：",a," at pages\\order\\createOrder.vue:174"),this.hasLogin||t.reLaunch({url:"/pages/wxAuth/wxAuth?returnUrl="+a});var r=t.getStorageSync("tmpOrderData")||"";console.log(r," at pages\\order\\createOrder.vue:181"),this.orderData=e.data,this.goodsList=r,console.log(this.goodsList," at pages\\order\\createOrder.vue:185"),e.addressData?this.addressData=JSON.parse(e.addressData):this.getAddrData(),this.calcTotal()},methods:{getAddrData:function(){var e=i(r.default.mark(function e(){var a,n;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showNavigationBarLoading(),a={pageNo:1,pageSize:1},e.next=4,this.$axios(this.$baseUrl.getContactsList,JSON.stringify(a));case 4:n=e.sent,200==n.data.code&&n.data.data.length&&(this.addressData=n.data.data[0]);case 6:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),calcTotal:function(){var t=this.goodsList,e=0;t.forEach(function(t){e+=t.productList.price*t.productNum}),this.total=Number(e.toFixed(2))},toggleMask:function(t){var e=this,a="show"===t?10:300,r="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=r},a)},toggleMaskPay:function(t){var e=this,a="show"===t?10:300,r="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=r},a)},numberChange:function(t){this.number=t.number},changePayType:function(t){this.payType=t},submit:function(){var e=i(r.default.mark(function e(){var a,n,o,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.addressData.code){e.next=3;break}return this.$api.msg("收货地址不能为空"),e.abrupt("return");case 3:if(a=this.goodsList,n=[],a.forEach(function(t){n.push({attrValues:t.productList.attrValueVOList,cartId:t.productList.id?t.productList.id:"",num:t.productNum,productCode:t.productList.productCode,productName:t.productList.productName})}),!this.subFlag){e.next=14;break}return this.subFlag=!1,o={invoiceCode:this.facdureData.code,invoiceType:0,isInvoice:this.facdureData.code?1:0,productList:n,shopContactsCode:this.addressData.code,yf:0},console.log("参数详情：",o," at pages\\order\\createOrder.vue:277"),e.next=12,this.$axios(this.$baseUrl.submitOrder,o);case 12:s=e.sent,200==s.data.code&&(this.subFlag=!0,t.removeStorage({key:"tmpOrderData"}),t.redirectTo({url:"/pages/money/pay?data="+JSON.stringify({orderData:s.data.data})}));case 14:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),stopPrevent:function(){}}};e.default=d}).call(this,a("6e42")["default"])},"71c5":function(t,e,a){},"9e3f":function(t,e,a){"use strict";a.r(e);var r=a("4e33"),n=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);e["default"]=n.a},a092:function(t,e,a){"use strict";var r=a("71c5"),n=a.n(r);n.a},d36c:function(t,e,a){"use strict";a.r(e);var r=a("da1c"),n=a("9e3f");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("a092");var s=a("2877"),i=Object(s["a"])(n["default"],r["a"],r["b"],!1,null,null,null);e["default"]=i.exports},da1c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=(t._self._c,JSON.stringify(t.facdureData));t.$mp.data=Object.assign({},{$root:{g0:a}})},n=[];a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n})}},[["2772","common/runtime","common/vendor"]]]);